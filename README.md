# Netflix | Highload

- Студент: Васютенко Роман Сергеевич
- Группа: WEB-31

## 1. Тема и целевая аудитория

**Тема сервиса:** видеостриминговая платформа с персональными рекомендациями, несколькими профилями, офлайн-загрузками и поддержкой высокого качества (HD/4K).

**Основные регионы:** США — 81,44 млн подписчиков, Великобритания — 18,4 млн, Германия — 16,59 млн, Бразилия — 16,59 млн \[1]

**Целевая аудитория:** глобальная аудитория платных подписчиков Netflix.

**Оценочный размер аудитории (MAU):** 301,6 млн платных аккаунтов. \[1]

> В отчётах Netflix «members» — это платные аккаунты; реальное количество индивидуальных зрителей/профилей может быть выше.

### Ключевой функционал MVP

1. Воспроизведение видео
2. Поиск и навигация по каталогу видео
3. Персональная лента рекомендаций (на основе просмотров и профилей).
4. История просмотров, подборки фильмов/сериалов
5. Управление аккаунтом
6. Оффлайн-загрузки и управление скачанными файлами

(Дополнительный функционал включает в себя: лайки/рецензии, live-стримы, торговые интеграция и т.п.)

### Продуктовые метрики 

| Метрика                                                                 |                                                                      Значение | Примечание                                                            |
| ----------------------------------------------------------------------- | -------------------------------------------------------------------------------------: | -------------------------------------------------------------------------------- |
| MAU (аккаунты с подпиской)                                      |                                                                        **300 000 000** | округлённо по отчётам 2025 года \[1] |
| Часы просмотра                                     |                                                 **95 000 000 000 часов** | официальная метрика Netflix (за первую половину 2025) \[2]        |
| Средние часы просмотра в день (на одного пользователя)                         |                                                                      ≈ **1,75 ч/день** | вычислено: (95B / 181 день) / MAU ≈ 525M часов/день / 300M ≈ 1,75 ч/день         |
| DAU — дневная аудитория           |                                                   **≈ 120–180 млн** (предположительно) | берём диапазон 40–60% MAU, так как точное значение не обнародовано |
| Средний объём памяти на аккаунт        |                                                                        **\~50–200 Мб** | профили, метаданные, watch history, bookmarks               |
| Средний объём скачанных материалов на аккаунт |                                                                          **\~1–10 Гб** | зависит от привычек пользователя (в среднем 1–4 фильма/сериала)                          |
| Среднее количество просмотров/просмотров видео на пользователя в день   | ≈ **3,5 просмотров/день** | вычислено: ≈ (1,75 ч/день) / (средняя длительность просмотра — 0,5 ч), если принять среднюю сессию ≈ 30 мин.                                            |

> Для расчётов трафика использованы следующие допущения по распределению качества стрима: SD 30%, HD 60%, 4K 10%.

### Технические метрики

#### 1. Входные исходные величины и допущения

* 95 млрд часов просмотра
* Рассчётные дни в полугодии: 181 день → **суммарно 95 млрд часов ⇒ \~524 861 878 часов/день** (daily\_hours).
* Распределение по качествам (допущение): SD 30% (0.7 Мбит/с), HD 60% (5.0 Мбит/с), 4K 10% (15 Мбит/с). \[3]
* Средняя длительность сегмента/запроса (chunk) для ABR: **4 секунды** (допущение, среднее значение для DASH/HLS варианта).
* Кривые пиков: считаем, что **20% от суточного трафика** приходится на час пик (допущение, приближённая оценка для крупных потоковых платформ).

#### 2. Расчёт трафика

Вычисления:

* Средневзвешенное значение битрейта (avg\_bitrate) = 0,6 × 5 + 0,3 × 0,7 + 0,1 × 15 = **4,71 Мбит/с**
* Ежедневный объём исходящего трафика (Мбит/день) = (daily\_hours) × 3600 × avg\_bitrate

**Результат (округлено):**

| Показатель                                                  |                                   Значение |
| ----------------------------------------------------------- | -----------------------------------------: |
| Средняя скорость потока (взвешенная)                        |                              **4,71 Мбит/с** |
| Суточный исходящий трафик (Гб/день)                         |                  **\~1,11 × 10^9 Гб/день** |
| Суточный исходящий трафик (Тб/день)                         | **\~1,09 × 10^6 Тб/день** |
| Пиковая пропускная способность (час пик, 20% трафика в час) |            **\~494 400 Гбит/с ≈ 494 Тбит/с** |

#### 3. Расчёт среднего и пикового RPS (запросы в секунду)

* Среднее количество одновременных зрителей: `avg_concurrent = daily_hours / 24 ≈ 21.87 млн`
* Пиковое количество одновременных зрителей (если 20% трафика в пиковый час): `peak_concurrent = daily_hours * 0.2 ≈ 105 000 000`
* Пусть каждый поток делает **1 HTTP-запрос сегмента каждые 4 секунды**. Тогда `RPS = (количество одновременных зрителей) / 4`

| Тип запросов                       |      RPS средний |       RPS пиковый |
| ---------------------------------- | ---------------: | ----------------: |
| HTTP запросы видео-сегментов (CDN) | **\~5,47 млн RPS** | **\~26,24 млн RPS** |

> RPS расчитан для CDN (множество лёгких GET запросов сегментов). RPS на API (метаданные, аутентификация, рекомендации) существенно меньше.

#### 4. Оценка объёма хранения каталога

Исходные данные и допущения:

* Размер каталога согласно отчётам: **\~18 000 единиц контента** \[4]
* Средняя продолжительность контента: пусть **1,5 часа** с учётом наличия как сериалов, так и фильмов (допущение)
* Кодирование/варианты хранения: SD + HD + 4K + аудиодорожки + обложки. Тогда пусть средний объём закодированных файлов ≈ **20 Гб** на единицу контента
* Репликация по CDN/edge: Netflix использует Open Connect и размещает копии в крупных IX/ISP. Пусть репликационный коэффициент равен **10** для грубой оценки.

Тогда:

* Объем памяти для всего контента, хранящегося в едином экземпляре: 18 000 × 20 Гб = **360 000 Гб ≈ 351,6 Тб**
* С учётом репликации ×10: **≈ 3,5 Пб**

> Учитывается только основная библиотека закодированных файлов. Дополнительные хранилища: сырьё/мастера, ВК, резервные копии, ML-датасеты и т.п. — значительно увеличат объём.

### Использованные источники

1. Основные регионы по распространенности сервиса и количество зарегистрированных пользователей: [www.demandsage.com](https://www.demandsage.com/netflix-subscribers)

2. Суммарные часы просмотра за первую половину 2025 года: [about.netflix.com](https://about.netflix.com/news/what-we-watched-a-netflix-engagement-report)

3. Данные объёма трафика за час по качествам и технические публикации о битрейтах: [help.netflix.com](https://help.netflix.com/en/node/87)

4. Размер каталога контента: [about.netflix.com](https://about.netflix.com/news/what-we-watched-a-netflix-engagement-report)

5. Официальная страница Open Connect: [openconnect.netflix.com](https://openconnect.netflix.com)
